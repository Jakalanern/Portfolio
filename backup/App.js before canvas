import './App.css'
import { ReactComponent as Waves } from './svgs/waves.svg'
import { Pivot as Hamburger } from 'hamburger-react'
import { useEffect, useState } from 'react'
import { FiSun, FiMoon } from 'react-icons/fi'
import { VscCode } from 'react-icons/vsc'
import { BsPerson } from 'react-icons/bs'
import { VscMail } from 'react-icons/vsc'
import { IoHomeOutline } from 'react-icons/io5'
import projectImage1 from './project-images/esthetics_by_tay.png'
import projectImage2 from './project-images/disaster-tracker.png'

function App() {
  const [mobileNav, setMobileNav] = useState(false)
  const [darkMode, setDarkMode] = useState(false)
  const [distanceToTop, setDistanceToTop] = useState(0)
  const [width, setWidth] = useState()
  const imageSize = '325px'

  // Detect and set light / dark mode accordingly
  useEffect(() => {
    if (
      window.matchMedia &&
      window.matchMedia('(prefers-color-scheme: dark)').matches
    ) {
      // dark mode
      setDarkMode(true)
    } else {
      setDarkMode(false)
    }

    window
      .matchMedia('(prefers-color-scheme: dark)')
      .addEventListener('change', (event) => {
        const colorScheme = event.matches ? 'dark' : 'light'
        if (colorScheme === 'dark') {
          console.log('DARK')
          setDarkMode(true)
        } else if (colorScheme === 'light') {
          console.log('LIGHT')
          setDarkMode(false)
        }
      })
  }, [])

  useEffect(() => {
    const handleResize = () => {
      setWidth(window.innerWidth)
    }

    window.addEventListener('resize', handleResize)

    return () => {
      window.removeEventListener('resize', handleResize)
    }
  }, [setWidth])

  useEffect(() => {
    if (width >= 1280) {
      closeMobileNav()
    }
  }, [width])

  window.onscroll = () => {
    const position = window.pageYOffset
    setDistanceToTop(position)
  }

  const scrollToTop = () => {
    window.scrollTo(0, 0)
  }

  const scrollToProjects = () => {
    window.location.href = '#projects'
  }

  const toggleMobileNav = () => {
    setMobileNav(!mobileNav)
  }

  const closeMobileNav = () => {
    setMobileNav(false)
  }

  const toggleDarkMode = () => {
    setDarkMode(!darkMode)
  }

  return (
    <div
      className={`overflow-x-hidden ${
        darkMode ? 'dark bg-zinc-800' : 'bg-white'
      }`}>
      <header className='fixed w-screen top-0 z-50 max-h-[100px] bg-white dark:text-white dark:bg-zinc-800 px-1 pr-4 sm:px-2 sm:pr-6'>
        <div className='box' style={{ padding: '15px 15px' }}>
          <div className='flex row justify-start items-center gap-4'>
            <h1
              className='logo text-3xl lg:text-4xl cursor-pointer'
              onClick={() => {
                scrollToTop()
                mobileNav && closeMobileNav()
              }}>
              <span className='text-accent-900'>JS</span>Dev
            </h1>
            <div
              className='xl:hidden ml-auto text-xs md:text-lg cursor-pointer'
              onClick={() => {
                toggleDarkMode()
              }}>
              {darkMode ? (
                <button
                  id='button'
                  className='border py-1 px-2 hover:bg-white hover:text-black'>
                  Light Theme
                </button>
              ) : (
                <button
                  id='button'
                  className='border border-zinc-400 py-1 px-2 hover:bg-zinc-800 hover:text-white'>
                  Dark Theme
                </button>
              )}
            </div>
            <nav className='mobile-nav xl:hidden' onClick={toggleMobileNav}>
              <Hamburger
                direction='left'
                toggled={mobileNav}
                color={darkMode ? 'white' : 'black'}
              />
            </nav>
            <ul className='hidden xl:flex gap-6 text-center items-center text-2xl ml-auto'>
              <li>
                <div
                  onClick={() => {
                    scrollToTop()
                    closeMobileNav()
                  }}
                  className='flex gap-2 items-center cursor-pointer hover:text-accent-900'>
                  Home
                  <span className='text-accent-900'>
                    <IoHomeOutline />
                  </span>
                </div>
              </li>
              <li>
                <a
                  href='#projects'
                  onClick={closeMobileNav}
                  className='flex gap-2 items-center hover:text-accent-900'>
                  Projects
                  <span className=' text-accent-900 '>
                    <VscCode />
                  </span>
                </a>
              </li>
              <li>
                <a
                  href='#about'
                  onClick={closeMobileNav}
                  className='flex gap-2 items-center hover:text-accent-900'>
                  About Me
                  <span className=' text-accent-900 '>
                    <BsPerson />
                  </span>
                </a>
              </li>
              <li>
                <a
                  href='#contact'
                  onClick={closeMobileNav}
                  className='flex gap-2 items-center hover:text-accent-900'>
                  Contact Me{' '}
                  <span className=' text-accent-900 '>
                    <VscMail />
                  </span>
                </a>
              </li>
              <div
                className='hidden xl:block ml-1 text-xs md:text-lg cursor-pointer'
                onClick={() => {
                  toggleDarkMode()
                }}>
                {darkMode ? (
                  <button id='button' className='border py-1 px-2'>
                    Light Theme
                  </button>
                ) : (
                  <button
                    id='button'
                    className='border border-zinc-400 py-1 px-2'>
                    Dark Theme
                  </button>
                )}
              </div>
            </ul>
          </div>
        </div>
      </header>
      {mobileNav && (
        <section
          id='mobile-nav'
          className='fixed top-0 h-screen w-screen bg-white z-40 grid items-center text-3xl md:text-4xl lg:text-5xl xl:text-6xl dark:text-white dark:bg-zinc-800'>
          <ul className='flex flex-col gap-12 text-center items-center'>
            <li id='mobile-nav-link'>
              <div
                onClick={() => {
                  scrollToTop()
                  closeMobileNav()
                }}
                className='flex gap-4 items-center cursor-pointer hover:text-accent-900'>
                Home
                <span className='text-accent-900'>
                  <IoHomeOutline />
                </span>
              </div>
            </li>
            <li id='mobile-nav-link' className=''>
              <a
                href='#projects'
                onClick={closeMobileNav}
                className='flex gap-4 items-center hover:text-accent-900'>
                Projects{' '}
                <span className=' text-accent-900 '>
                  <VscCode />
                </span>
              </a>
            </li>
            <li id='mobile-nav-link'>
              <a
                href='#about'
                onClick={closeMobileNav}
                className='flex gap-4 items-center hover:text-accent-900'>
                About Me
                <span className=' text-accent-900 '>
                  <BsPerson />
                </span>
              </a>
            </li>
            <li id='mobile-nav-link'>
              <a
                href='#contact'
                onClick={closeMobileNav}
                className='flex gap-4 items-center hover:text-accent-900'>
                Contact Me{' '}
                <span className=' text-accent-900 '>
                  <VscMail />
                </span>
              </a>
            </li>
          </ul>
        </section>
      )}
      <main>
        <section className='welcome-section min-h-[calc(90vh-100px)] sm:min-h-[calc(98vh-100px)] w-screen relative overflow-hidden dark:text-white bg-transparent'>
          <article className='box w-screen min-h-[calc(90vh-100px)] sm:min-h-[calc(98vh-100px)] text-center grid items-center gap-4'>
            <div className='py-8 px-4 mb- grid items-center gap-2 md:mb-72'>
              <h2 className='text-3xl md:text-4xl lg:text-5xl xl:text-6xl flex flex-col gap-2'>
                <div>
                  I'm <span className='text-accent-900 '>Jack Stevens</span>
                </div>
              </h2>
              <p className='font-light text-lg md:text-xl lg:text-2xl xl:text-3xl'>
                Web Developer in Orange County, California.
              </p>
            </div>
          </article>
          <aside
            className={`absolute bottom-0 w-screen text-center z-20 cursor-pointer ${
              distanceToTop < 200
                ? 'opacity-100'
                : distanceToTop < 300
                ? 'opacity-30'
                : 'opacity-10'
            }`}
            onClick={() => {
              scrollToProjects()
            }}>
            <p className='text-zinc-600 dark:text-white dark:opacity-60'>
              Scroll Down
            </p>
            <div className='arrow pb-4 md:pb-4 pt-2'>
              <span className='dark:border-neutral-50 dark:border-opacity-40'></span>
            </div>
          </aside>
          <Waves className='absolute bottom-0 h-[200px] sm:h-auto' />
        </section>
        <section
          className='w-screen pt-[160px] dark:text-white bg-transparent dark:text-white dark:bg-zinc-800'
          style={{
            background:
              'linear-gradient(to bottom,rgba(0, 200, 150, 0.7) 0,rgba(255, 255, 255, 0) 50%)',
          }}>
          <div
            className={` box w-[300px] md:w-[600px] lg:w-[750px] xl:w-[1024px] text-3xl md:text-4xl lg:text-5xl xl:text-6xl flex flex-col gap-8 text-center mx-auto`}>
            <div id='projects' className='w-screen -translate-y-24'></div>
            <h1 className='pt-6 text-4xl md:text-5xl lg:text-6xl xl:text-7xl mb-4'>
              My Projects
            </h1>
            <section className={`projects flex flex-col gap-20 mb-12`}>
              <article className='mx-auto project flex flex-col gap-6 border-b border-accent-200 pb-20'>
                <img
                  src={projectImage1}
                  alt=''
                  className={`w-[275px] h-[275px] md:w-[325px] md:h-[325px] lg:w-[500px] lg:h-[500px] rounded-sm mx-auto`}
                />
                <div className='mx-auto skills text-lg flex gap-2 flex-wrap justify-center'>
                  <span className='bg-accent-900 text-white px-2'>HTML</span>
                  <span className='bg-accent-900 text-white px-2'>CSS</span>
                  <span className='bg-accent-900 text-white px-2'>
                    JavaScript
                  </span>
                  <span className='bg-accent-900 text-white px-2'>React</span>
                  <span className='bg-accent-900 text-white px-2'>
                    Styled Components
                  </span>
                  <span className='bg-accent-900 text-white px-2'>Figma</span>
                </div>
                <div className='description text-lg'>
                  <p>
                    Worked one on one with a client through a design phase using
                    Figma before building a functional website that they felt
                    best represented their brand.
                  </p>
                </div>
                <div className='project-buttons flex gap-4 text-xl justify-center'>
                  <button
                    id='button'
                    className='border border-zinc-400 dark:border-zinc-100 px-2 hover:bg-white hover:text-accent-900 dark:hover:bg-zinc-900 dark:hover:text-white'>
                    Code
                  </button>
                  <button
                    id='button'
                    className='border border-zinc-400 dark:border-zinc-100 px-2 hover:bg-white hover:text-accent-900 dark:hover:bg-zinc-900 dark:hover:text-white'>
                    Demo
                  </button>
                </div>
              </article>
              <article className='mx-auto project flex flex-col gap-6 border-b border-accent-200 pb-20'>
                <img
                  src={projectImage1}
                  alt=''
                  className={`w-[275px] h-[275px] md:w-[325px] md:h-[325px] lg:w-[500px] lg:h-[500px] rounded-sm mx-auto`}
                />
                <div className='mx-auto skills text-lg flex gap-2 flex-wrap justify-center'>
                  <span className='bg-accent-900 text-white px-2'>HTML</span>
                  <span className='bg-accent-900 text-white px-2'>CSS</span>
                  <span className='bg-accent-900 text-white px-2'>
                    JavaScript
                  </span>
                  <span className='bg-accent-900 text-white px-2'>React</span>
                  <span className='bg-accent-900 text-white px-2'>
                    Styled Components
                  </span>
                  <span className='bg-accent-900 text-white px-2'>Figma</span>
                </div>
                <div className='description text-lg'>
                  <p>
                    Worked one on one with a client through a design phase using
                    Figma before building a functional website that they felt
                    best represented their brand.
                  </p>
                </div>
                <div className='project-buttons flex gap-4 text-xl justify-center'>
                  <button
                    id='button'
                    className='border border-zinc-400 dark:border-zinc-100 px-2 hover:bg-white hover:text-accent-900 dark:hover:bg-zinc-900 dark:hover:text-white'>
                    Code
                  </button>
                  <button
                    id='button'
                    className='border border-zinc-400 dark:border-zinc-100 px-2 hover:bg-white hover:text-accent-900 dark:hover:bg-zinc-900 dark:hover:text-white'>
                    Demo
                  </button>
                </div>
              </article>
              <article className='mx-auto project flex flex-col gap-6 border-b border-accent-200 pb-20'>
                <img
                  src={projectImage1}
                  alt=''
                  className={`w-[275px] h-[275px] md:w-[325px] md:h-[325px] lg:w-[500px] lg:h-[500px] rounded-sm mx-auto`}
                />
                <div className='mx-auto skills text-lg flex gap-2 flex-wrap justify-center'>
                  <span className='bg-accent-900 text-white px-2'>HTML</span>
                  <span className='bg-accent-900 text-white px-2'>CSS</span>
                  <span className='bg-accent-900 text-white px-2'>
                    JavaScript
                  </span>
                  <span className='bg-accent-900 text-white px-2'>React</span>
                  <span className='bg-accent-900 text-white px-2'>
                    Styled Components
                  </span>
                  <span className='bg-accent-900 text-white px-2'>Figma</span>
                </div>
                <div className='description text-lg'>
                  <p>
                    Worked one on one with a client through a design phase using
                    Figma before building a functional website that they felt
                    best represented their brand.
                  </p>
                </div>
                <div className='project-buttons flex gap-4 text-xl justify-center'>
                  <button
                    id='button'
                    className='border border-zinc-400 dark:border-zinc-100 px-2 hover:bg-white hover:text-accent-900 dark:hover:bg-zinc-900 dark:hover:text-white'>
                    Code
                  </button>
                  <button
                    id='button'
                    className='border border-zinc-400 dark:border-zinc-100 px-2 hover:bg-white hover:text-accent-900 dark:hover:bg-zinc-900 dark:hover:text-white'>
                    Demo
                  </button>
                </div>
              </article>
            </section>
          </div>
        </section>
      </main>
    </div>
  )
}

export default App
